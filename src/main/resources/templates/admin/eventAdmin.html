<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>

    <link rel="icon"  type="image/png"  href="/favicon.ico" />
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>[[${event.title}]]</title>


    <!-- Bootstrap core CSS-->
    <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">

    <!-- Custom fonts for this template-->
    <link th:href="@{/vendor/fontawesome-free/css/all.min.css}" rel="stylesheet" type="text/css">

    <!-- Page level plugin CSS-->
    <link th:href="@{/vendor/datatables/dataTables.bootstrap4.css}" rel="stylesheet">
    <!--    <link th:href="@{/vendor/datatable1.13.1/jquery.dataTables.min.css}" rel="stylesheet">-->
    <!-- Custom styles for this template-->
    <link th:href="@{/vendor/css/sb-admin.css}" rel="stylesheet">


</head>


<body id="page-top">


<th:block th:include="layout/header"></th:block>

<div id="wrapper">

    <!-- Sidebar -->
    <th:block th:include="layout/sidebar"></th:block>
    <div id="content-wrapper">

        <div class="container-fluid">


            <!--          Event details card  -->

            <div class="card mb-3">
                <!--                <div class="card-header">-->

                <!--                </div>-->
                <div class="card-body">
                    <input type="hidden" th:value="${event.id}" id="eventId">

                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="row">
                                    <h1>
                                        <div th:text="${event.title}"></div>
                                    </h1>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="row">
                                    <i class="fa fa-bars myicon" aria-hidden="true"></i>

                                    <div th:text="${event.description}"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <i class="fa fa-map-marker myicon" aria-hidden="true"></i>


                                    <span> <div th:text="${event.location}"></div></span>
                                </div>
                            </div>


                            <div class="form-group">

                                <div class="row">
                                    <i class="fa fa-clock-o myicon" aria-hidden="true"></i>
                                    <div class="col-sm-12  align-middle">
                                        <div th:text="${eventtime[0]}"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 align-middle">
                                        <div th:text="${eventtime[1]}"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 align-middle">
                                        <div th:text="${eventtime[2]}"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 align-middle">
                                        <div th:text="${eventtime[3]}"></div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12 align-middle">
                                        <div th:text="${eventtime[4]}"></div>
                                    </div>
                                </div>

                            </div>


                            <div class="form-group">
                                <div class="row">
                                    <i class="fa fa-user myicon" aria-hidden="true"></i>
                                    <div th:text="${ event.going}"></div>
                                </div>
                            </div>

                        </div>
                        <div class="col-sm-6">

                            <div class="row form-group">
                                <span class="align-middle">
                                <div class="background">
                                    <center>
                                        <h5>
                                            <div id="sharablelink">

                                            </div>
                                        </h5>
                                        <button class="clipboard">Copy Sharable Link</button>
                                        <p></p>
                                    </center>
                                </div>
                                     </span>

                            </div>


                        </div>
                    </div>


                </div>
                <!--                <div class="card-footer small text-muted"></div>-->
            </div>


            <!--  particilant card-->
            <div class="card mb-3">
                <div class="card-header">
                    <i class="fas fa-table"></i>
                    Participants
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="participantsdataTable" width="100%" cellspacing="0">
                            <thead>
                            <tr>
                                <th>Id</th>
                                <th>Name</th>
                                <th>Email</th>

                            </tr>
                            </thead>

                            <tbody>
                            <!--                            <tr th:each="temp : ${participants}">-->

                            <!--                                <td th:text="${temp.id}"/>-->
                            <!--                                <td th:text="${temp.name}"/>-->
                            <!--                                <td th:text="${temp.email}"/>-->

                            <!--                            </tr>-->

                            </tbody>
                        </table>
                    </div>
                </div>
                <!--                <div class="card-footer small text-muted"></div>-->
            </div>

            <!-- /.container-fluid -->

            <!-- Sticky Footer -->
            <footer class="sticky-footer">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span></span>
                    </div>
                </div>
            </footer>

        </div>
        <!-- /.content-wrapper -->

    </div>
    <!-- /#wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->


    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Ã—</span>
                    </button>
                </div>
                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>

                    <form th:action="@{/logout}" method="POST">


                        <button type="submit" class="btn btn-success">Logout</button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <!-- Bootstrap core JavaScript-->
    <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
    <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>

    <!-- Core plugin JavaScript-->
    <script th:src="@{/vendor/jquery-easing/jquery.easing.min.js}"></script>

    <!-- Page level plugin JavaScript-->
    <script th:src="@{/vendor/chart.js/Chart.min.js}"></script>

    <script th:src="@{/vendor/datatables/jquery.dataTables.js}"></script>
    <script th:src="@{/vendor/datatables/dataTables.bootstrap4.js}"></script>

    <!--    <script th:src="@{/vendor/datatable1.13.1/jquery.dataTables.min.js}"></script>-->

    <!-- Custom scripts for all pages-->
    <script th:src="@{/vendor/js/sb-admin.min.js}"></script>
    <!--    <script src="https://clipboardjs.com/dist/clipboard.min.js"></script>-->
    <script type="text/javascript"  th:src="@{/js/jquery.spring-friendly.js}"></script>
    <script>

        $(document).ready(function () {


            $("#nav li:nth-child(1)").addClass("active");


            // $('#participantsdataTable').DataTable();

            var participantsdataTable = $('#participantsdataTable').DataTable({
                "processing": true,
                "serverSide": true,
                "pageLength": 10,
                "pagingType": "full_numbers",
                "lengthMenu": [
                    [10, 25, 50],
                    ['10 rows', '25 rows', '50 rows']
                ],
                "ajax": {
                    "type": 'GET',
                    "url": '/admin/participants/[[${eventId}]]',
                    dataSrc: "data"
                },
                "columns": [
                    {"data": "id"},
                    {"data": "name"},
                    {"data": "email"}
                ],
                // "dom": '<"top"rlf>t<"bottom"ip>',


                // "dom": '<"top"i>rt<"bottom"lp><"clear">',
            });
            setInterval(function () {
                participantsdataTable.ajax.reload();
            }, 10000);

            var $temp = $("<input>");
            var $url = $(location).attr('href');
            var eventId = $("#eventId").val();
            var currentUrl = new URL($url);
            var port = location.port || (location.protocol === 'https:' ? '443' : '80');
            var sharablelink = location.protocol + '//' + currentUrl.hostname + ":" + port + "/public/" + eventId;
            $("#sharablelink").text(sharablelink);

            $('.clipboard').on('click', function () {
                $("body").append($temp);
                $temp.val(sharablelink).select();
                document.execCommand("copy");
                $temp.remove();
                $("p").text("URL copied!");
            })

        });

    </script>

    <style>
        .myicon {
            font-size: 25px;
            color: red;
            padding: 2px;
        }

        .clipboard {
            border: 0;
            padding: 15px;
            border-radius: 3px;
            background-image: linear-gradient(135deg, #FDEB71 10%, #F8D800 100%);
            cursor: pointer;
            color: #04048c;
            font-family: 'Karla', sans-serif;
            font-size: 16px;
            position: relative;
            top: 0;
            transition: all .2s ease;

        &
        :hover {
            top: 2px;
        }

        }

    </style>


</body>

</html>
